# 画面機能仕様書

## 目次

1. [認証関連画面](#認証関連画面)
   - [ログイン画面](#1-ログイン画面)
   - [新規登録画面](#2-新規登録画面)
   - [パスワードリセット画面](#3-パスワードリセット画面)

2. [管理者画面](#管理者画面)
   - [従業員一覧画面](#4-従業員一覧画面)
   - [従業員登録・編集画面](#5-従業員登録編集画面)
   - [給与明細一覧画面](#6-給与明細一覧画面)
   - [勤怠情報一覧画面](#7-勤怠情報一覧画面)
   - [申請一覧画面](#8-申請一覧画面)
   - [手当マスタ画面](#9-手当マスタ画面)
   - [控除マスタ画面](#10-控除マスタ画面)

3. [従業員画面](#従業員画面)
   - [勤怠打刻画面](#11-勤怠打刻画面)
   - [休暇申請画面](#12-休暇申請画面)

---

## 認証関連画面

### 1. ログイン画面

**パス**: `/login`  
**ファイル**: `src/pages/Login.tsx`  
**アクセス権限**: 未認証ユーザー

#### 機能概要

ユーザーの認証を行い、管理者または従業員のダッシュボードに遷移する画面です。

#### 主要機能

1. **ID・パスワードログイン**
   - メールアドレスまたはユーザー名の入力
   - パスワードの入力
   - ログインタイプ（管理者/従業員）の選択
   - ログイン処理の実行

2. **Googleログイン**
   - Googleアカウントでの認証
   - ログインタイプ（管理者/従業員）の選択
   - OAuth認証フローの実行

3. **パスワードリセットリンク**
   - パスワードリセット画面への遷移

4. **新規登録リンク**
   - 新規登録画面への遷移

#### UI要素

- **入力フィールド**
  - ID（メールアドレスまたはユーザー名）
  - パスワード
- **ボタン**
  - ログインタイプ切り替えタブ（管理者/従業員）
  - ログインボタン
  - Googleログインボタン
- **リンク**
  - パスワードを忘れた場合
  - 新規登録

#### 動作仕様

- **外部通信中**: プログレスバーを表示
- **エラー表示**: エラーメッセージを日本語で表示
- **ログイン成功後**: 選択したロールに応じて以下の画面に遷移
  - 管理者: `/admin/employees`
  - 従業員: `/employee/attendance`
- **既に認証済み**: 適切なダッシュボードにリダイレクト

#### レスポンシブ対応

- モバイル表示: 768px以下でレイアウトを調整

---

### 2. 新規登録画面

**パス**: `/signup`  
**ファイル**: `src/pages/SignUp.tsx`  
**アクセス権限**: 未認証ユーザー

#### 機能概要

新規ユーザーのアカウント登録とメールアドレス認証を行う画面です。

#### 主要機能

1. **ユーザー登録**
   - メールアドレスの入力
   - パスワードの入力（確認用パスワード含む）
   - ユーザー名の入力
   - 登録処理の実行

2. **メール認証コード確認**
   - メールで送信された認証コードの入力
   - 認証コードの確認処理

#### UI要素

- **入力フィールド**
  - メールアドレス
  - パスワード
  - パスワード確認
  - ユーザー名
  - 認証コード（認証コード確認画面）

#### 動作仕様

- **外部通信中**: プログレスバーを表示
- **エラー表示**: エラーメッセージを日本語で表示
- **登録成功後**: 認証コード入力画面を表示
- **認証成功後**: ログイン画面に遷移

#### バリデーション

- メールアドレス形式チェック
- パスワード強度チェック
- パスワード一致チェック

---

### 3. パスワードリセット画面

**パス**: `/password-reset`  
**ファイル**: `src/pages/PasswordReset.tsx`  
**アクセス権限**: 未認証ユーザー

#### 機能概要

パスワードを忘れたユーザーが新しいパスワードを設定するための画面です。

#### 主要機能

1. **パスワードリセット要求**
   - メールアドレスの入力
   - リセットコードの送信

2. **パスワード再設定**
   - メールで送信された確認コードの入力
   - 新しいパスワードの入力（確認用パスワード含む）
   - パスワードの更新

#### UI要素

- **入力フィールド**
  - メールアドレス
  - 確認コード
  - 新しいパスワード
  - パスワード確認

#### 動作仕様

- **外部通信中**: プログレスバーを表示
- **エラー表示**: エラーメッセージを日本語で表示
- **リセット成功後**: ログイン画面に遷移

---

## 管理者画面

### 4. 従業員一覧画面

**パス**: `/admin/employees`  
**ファイル**: `src/pages/admin/EmployeeList.tsx`  
**アクセス権限**: 管理者のみ

#### 機能概要

従業員の一覧表示、検索、フィルタリング、編集、給与明細へのアクセスを提供する画面です。

#### 主要機能

1. **従業員一覧表示**
   - テーブル形式での一覧表示（デスクトップ）
   - カード形式での一覧表示（モバイル）
   - 表示項目:
     - 従業員ID
     - 氏名（姓・名の順序で表示、`firstName`（苗字/姓）+ `lastName`（名前/名））
     - 雇用形態
     - メールアドレス
     - 入社日
     - 退社日
     - 基本給
     - 基本休憩時間
     - 有給情報
     - 手当（手当マスタから取得した情報を表示）
     - 更新日時
     - 更新者

2. **検索・フィルタリング**
   - 雇用形態によるフィルタリング（正社員/パート）
   - 在籍状況によるフィルタリング（在籍のみ/全件）
   - 検索キーワードによる部分一致検索（氏名）

3. **ソート機能**
   - 各カラムでのソート（昇順/降順）
   - ソート可能な項目:
     - 従業員ID
     - 氏名（姓でソート）
     - 雇用形態
     - メールアドレス
     - 入社日
     - 基本給

4. **従業員登録**
   - 新規登録ボタンでモーダルを開く
   - 従業員情報の入力フォーム

5. **従業員編集**
   - 編集ボタンでモーダルを開く
   - 既存の従業員情報の編集

6. **給与明細へのアクセス**
   - 「明細」ボタンで従業員の給与明細一覧画面に遷移

#### 従業員情報入力項目

- **基本情報**
  - 苗字（姓、`firstName`、最大50文字）
  - 名前（名、`lastName`、最大50文字）
  - 雇用形態（正社員/パート）
  - メールアドレス
  - 入社日
  - 退社日（オプション）

- **給与情報**
  - **正社員の場合**
    - 基本給（月給）
    - 日給（自動計算: 基本給 ÷ 20.5）
    - 時給（自動計算: 日給 ÷ 7.5）
  - **パートの場合**
    - 基本給（時給）

- **その他**
  - 基本休憩時間（なし/30分/60分/90分）
  - 手当の選択（複数選択可能）
  - 有給付与情報（付与日と日数のペアを複数登録可能）
  - 管理者フラグ

#### UI要素

- **検索・フィルターエリア**
  - 雇用形態チェックボックス
  - 在籍のみチェックボックス
  - 検索入力欄（モバイル時は展開/折りたたみ可能）

- **テーブル（デスクトップ）**
  - ヘッダー行にソートアイコン
  - 各従業員の詳細情報

- **カード（モバイル）**
  - 各従業員の主要情報
  - アクションボタン（編集、明細）

#### データ取得

- **従業員一覧API**: `GET /api/v1/employees` を呼び出し
- **手当マスタAPI**: 従業員一覧API取得成功後、`GET /api/v1/allowances` を呼び出し
  - 取得した手当マスタをlocalStorageに保存（従業員登録・更新画面で使用）
  - 手当マスタ取得エラー時は警告として記録するが、従業員一覧の表示は続行（ダミーデータを使用）

#### 動作仕様

- **登録/更新成功時**: 成功メッセージを表示
- **バリデーション**: 必須項目のチェック
- **モーダル**: デスクトップでは左にキャンセル、右に登録/更新ボタン
- **モバイル**: キャンセルボタンを下に配置
- **外部通信中**: プログレスバーを表示
- **エラー表示**: エラーメッセージをスナックバーで表示

---

### 5. 従業員登録・編集画面

**パス**: `/admin/employees/register`（新規登録）  
**パス**: `/admin/employees/edit/:id`（編集）  
**ファイル**: `src/pages/admin/EmployeeRegistration.tsx`  
**アクセス権限**: 管理者のみ

#### 機能概要

従業員情報の新規登録または既存従業員情報の編集を行う画面です。

#### 主要機能

1. **従業員情報の入力**
   - 基本情報（氏名（苗字・名前）、雇用形態、メールアドレス、入社日など）
   - 給与情報（基本給、手当など）
   - 有給付与情報の管理（付与日ごとの編集・追加）
   - 基本休憩時間の設定

2. **手当マスタの取得**
   - 画面読み込み時に手当マスタを取得
   - まずlocalStorageから読み込み、なければAPI（`GET /api/v1/allowances`）から取得
   - 取得した手当マスタをlocalStorageに保存（次回以降の高速化）
   - 手当マスタ取得中はローディング表示

3. **給与計算の自動化**
   - 正社員の場合: 日給・時給の自動計算
   - パートの場合: 基本給（時給）のみ入力

4. **有給付与情報の管理**
   - 付与日ごとの有給日数の登録・編集
   - 複数の付与日の管理

#### UI要素

- **入力フォーム**
  - 基本情報セクション
  - 給与情報セクション
  - 有給付与情報セクション（テーブル形式）
  - 基本休憩時間セクション

- **ボタン**
  - キャンセルボタン
  - 登録/更新ボタン

#### データ取得

- **手当マスタ**: 画面読み込み時に取得
  - まずlocalStorageから読み込み
  - localStorageにデータがない場合はAPI（`GET /api/v1/allowances`）から取得
  - 取得した手当マスタをlocalStorageに保存
  - 手当マスタ取得エラー時はエラーメッセージを表示し、手当選択を無効化

- **従業員情報（編集時）**: 編集モードの場合、`GET /api/v1/employees/{id}` を呼び出し

#### 動作仕様

- **登録/更新成功時**: 従業員一覧画面に戻る
- **バリデーション**: 必須項目のチェック
- **レスポンシブ対応**: モバイル表示に対応
- **外部通信中**: プログレスバーを表示
- **エラー表示**: エラーメッセージをスナックバーで表示
- **手当マスタローディング**: 手当マスタ取得中は「手当マスタを読み込み中...」と表示

---

### 6. 給与明細一覧画面

**パス**: `/admin/employees/:employeeId/payroll`  
**ファイル**: `src/pages/admin/EmployeePayroll.tsx`  
**アクセス権限**: 管理者のみ

#### 機能概要

特定の従業員の給与明細（給与・賞与）の一覧表示、登録、編集、閲覧を行う画面です。

#### 主要機能

1. **給与明細一覧表示**
   - テーブル形式での一覧表示（デスクトップ）
   - カード形式での一覧表示（モバイル）
   - 表示項目:
     - 期間
     - 種類（給与明細/賞与明細）
     - 総支給額
     - 控除合計
     - 差引支給額
     - メモ（インライン編集可能）
     - 更新日時
     - 更新者

2. **検索・フィルタリング**
   - 会計年度によるフィルタリング
   - 年度選択ドロップダウン

3. **ソート機能**
   - 各カラムでのソート（昇順/降順）

4. **給与明細の登録**
   - 「+ 給与明細登録」ボタン
   - 「+ 賞与明細登録」ボタン
   - 給与明細入力フォームまたは賞与明細入力フォーム

5. **給与明細の編集**
   - 編集ボタンで編集画面を開く
   - 既存の給与明細情報の編集

6. **給与明細の閲覧**
   - 閲覧ボタンでプレビュー画面を開く
   - PDFエクスポート機能

7. **メモのインライン編集**
   - メモフィールドをクリックして編集
   - フォーカスアウトまたはEnterキーで保存
   - API: `PATCH /api/v1/payroll/{id}/memo`

#### 給与明細入力項目（給与）

- **勤務情報**
  - 1段目（横4列）:
  - 出勤日数
  - 休日出勤日数
  - 有給休暇日数
  - 有給残日数
  - 2段目（横3列）:
    - 稼働時間（時間）
    - 普通残業時間（時間）
    - 深夜残業時間（時間）

- **支給**
  - 基本給
  - 時間外手当
  - 深夜手当
  - 食事手当
  - 交通費
  - 住宅手当
  - その他手当（手当マスタから選択）

- **控除**
  - 社会保険料
  - 厚生年金保険料
  - 雇用保険料
  - 市県民税
  - 所得税
  - その他控除（控除マスタから選択）

#### 賞与明細入力項目（賞与）

- **支給**
  - 賞与額

- **控除**
  - 健康保険料
  - 厚生年金保険料
  - 雇用保険料
  - 所得税

- **注意**: 勤務情報は表示されない（賞与明細では不要）

#### UI要素

- **一覧表示**
  - テーブル（デスクトップ）
  - カード（モバイル）

- **種類バッジ**
  - 給与明細: 「給与明細」バッジ
  - 賞与明細: 「賞与明細」バッジ

- **メモ編集**
  - インライン編集フィールド
  - プレースホルダー: "クリックして編集"

#### 動作仕様

- **メモ編集**: フォーカスアウトまたはEnterキーで自動保存
- **PDFエクスポート**: プレビュー画面からPDFを生成
- **レスポンシブ対応**: モバイル表示に対応

---

### 7. 勤怠情報一覧画面

**パス**: `/admin/attendance`  
**ファイル**: `src/pages/admin/AttendanceList.tsx`  
**アクセス権限**: 管理者のみ

#### 機能概要

全従業員の勤怠情報の一覧表示、検索、フィルタリング、編集を行う画面です。

#### 主要機能

1. **勤怠情報一覧表示**
   - テーブル形式での一覧表示（デスクトップ）
   - カード形式での一覧表示（モバイル）
   - 表示項目:
     - 従業員ID
     - 従業員名（姓・名の順序で表示）
     - 日付
     - 出勤時刻
     - 退勤時刻
     - 休憩時間
     - 実働時間
     - ステータス
     - メモ（インライン編集可能）
     - 更新日時
     - 更新者

2. **検索・フィルタリング**
   - 従業員IDによる検索
   - 日付範囲によるフィルタリング
   - ステータスによるフィルタリング

3. **ソート機能**
   - 各カラムでのソート（昇順/降順）

4. **勤怠情報の編集**
   - 編集ボタンでモーダルを開く
   - 出勤時刻、退勤時刻、休憩時間の編集
   - API: `PATCH /api/v1/attendance/{id}`

5. **メモのインライン編集**
   - メモフィールドをクリックして編集
   - フォーカスアウトまたはEnterキーで保存
   - API: `PATCH /api/v1/attendance/{id}/memo`

#### UI要素

- **検索・フィルターエリア**
  - 従業員ID入力欄
  - 開始日・終了日入力欄
  - ステータス選択

- **テーブル（デスクトップ）**
  - 各勤怠ログの詳細情報

- **カード（モバイル）**
  - 各勤怠ログの主要情報

- **編集モーダル**
  - 出勤時刻入力
  - 退勤時刻入力
  - 休憩時間入力

#### 動作仕様

- **労働時間の表示**: APIから取得した`totalWorkMinutes`（総労働時間、分単位）を使用して表示
- **残業時間の表示**: APIから取得した`overtimeMinutes`（残業時間、分単位）を使用して表示
- **深夜時間の表示**: APIから取得した`lateNightMinutes`（深夜時間、分単位）を使用して表示
- **休憩時間の表示**: 休憩時間はフロントエンド側で計算して表示（APIレスポンスの`breaks`配列から計算）
- **編集成功時**: 実働時間とステータスを自動再計算
- **メモ編集**: フォーカスアウトまたはEnterキーで自動保存
- **レスポンシブ対応**: モバイル表示に対応

---

### 8. 申請一覧画面

**パス**: `/admin/requests`  
**ファイル**: `src/pages/admin/RequestApproval.tsx`  
**アクセス権限**: 管理者のみ

#### 機能概要

従業員からの休暇申請と打刻修正申請の一覧表示、承認・却下、代理申請登録を行う画面です。

#### 主要機能

1. **申請一覧表示**
   - テーブル形式での一覧表示（デスクトップ）
   - カード形式での一覧表示（モバイル）
   - 表示項目:
     - 申請種別（休暇申請/打刻修正申請）
     - 従業員名（姓・名の順序で表示）
     - 申請日
     - 申請内容（休暇種別、期間、理由など）
     - ステータス
     - 承認・却下ボタン

2. **検索・フィルタリング**
   - 申請種別によるフィルタリング
   - ステータスによるフィルタリング
   - 従業員名による検索

3. **承認・却下**
   - 承認ボタンで申請を承認
   - 却下ボタンで申請を却下
   - 却下理由の入力（オプション）

4. **代理申請登録**
   - 「+ 代理申請」ボタンでモーダルを開く
   - 従業員を選択して休暇申請を代理登録
   - 入力項目:
     - 従業員選択
     - 休暇種別
     - 期間（開始日・終了日）
     - 種別（全日/半日）
     - 日数（自動計算）
     - 理由

#### UI要素

- **検索・フィルターエリア**
  - 申請種別タブ
  - ステータス選択
  - 従業員名検索

- **テーブル（デスクトップ）**
  - 各申請の詳細情報

- **カード（モバイル）**
  - 各申請の主要情報

- **代理申請モーダル**
  - 従業員選択ドロップダウン
  - 休暇種別選択
  - 日付入力
  - 理由入力

#### 動作仕様

- **承認/却下成功時**: 一覧を更新
- **代理申請成功時**: 申請一覧に追加
- **日数自動計算**: 開始日・終了日から自動計算（全日/半日に応じて）

---

### 9. 手当マスタ画面

**パス**: `/admin/allowances`  
**ファイル**: `src/pages/admin/AllowanceMaster.tsx`  
**アクセス権限**: 管理者のみ

#### 機能概要

手当マスタデータの一覧表示、登録、編集、削除を行う画面です。

#### 主要機能

1. **手当一覧表示**
   - 登録されている手当の一覧
   - 表示項目:
     - 手当名
     - 表示色（色名、16進数コード、色見本）
     - 残業代に含むフラグ
     - 表示順序

2. **手当の登録・編集**
   - 新規登録ボタンまたは編集ボタンでモーダルを開く
   - 入力項目:
     - 手当名
     - 表示色（プリセット色から選択、またはカスタム色入力）
     - 残業代に含む（チェックボックス）
     - 表示順序

3. **手当の削除**
   - 削除ボタンで手当を削除
   - 確認ダイアログを表示

#### UI要素

- **一覧表示**
  - 手当カード形式

- **色選択**
  - プリセット色のグリッド（8列）
  - カスタム色入力フィールド（常に「カスタム」と表示）

- **編集モーダル**
  - 手当名入力
  - 色選択
  - 残業代に含むチェックボックス
  - 表示順序入力

#### 動作仕様

- **登録/更新成功時**: 一覧を更新
- **削除時**: 確認ダイアログを表示
- **色表示**: 色名、16進数コード、色見本を表示

---

### 10. 控除マスタ画面

**パス**: `/admin/deductions`  
**ファイル**: `src/pages/admin/DeductionMaster.tsx`  
**アクセス権限**: 管理者のみ

#### 機能概要

控除マスタデータの一覧表示、登録、編集、削除を行う画面です。

#### 主要機能

1. **控除一覧表示**
   - 登録されている控除の一覧
   - 表示項目:
     - 控除名
     - 表示順序

2. **控除の登録・編集**
   - 新規登録ボタンまたは編集ボタンでモーダルを開く
   - 入力項目:
     - 控除名
     - 表示順序

3. **控除の削除**
   - 削除ボタンで控除を削除
   - 確認ダイアログを表示

#### UI要素

- **一覧表示**
  - 控除カード形式

- **編集モーダル**
  - 控除名入力
  - 表示順序入力

#### 動作仕様

- **登録/更新成功時**: 一覧を更新
- **削除時**: 確認ダイアログを表示

---

## 従業員画面

### 11. 勤怠打刻画面

**パス**: `/employee/attendance`  
**ファイル**: `src/pages/employee/Attendance.tsx`  
**アクセス権限**: 従業員のみ

#### 機能概要

従業員の出勤・退勤打刻、打刻修正申請、打刻履歴確認を行う画面です。

#### 主要機能

1. **出勤・退勤打刻**
   - 出勤ボタンで出勤時刻を記録
   - 退勤ボタンで退勤時刻を記録
   - API: `POST /api/v1/attendance/clock-in`、`POST /api/v1/attendance/clock-out`

2. **休憩開始・終了**
   - 休憩開始ボタンで休憩開始時刻を記録
   - 休憩終了ボタンで休憩終了時刻を記録
   - API: `POST /api/v1/attendance/{id}/break/start`、`POST /api/v1/attendance/{id}/break/{breakId}/end`

3. **打刻履歴一覧**
   - 過去の打刻記録の一覧表示
   - 表示項目:
     - 日付
     - 出勤時刻
     - 退勤時刻
     - 休憩時間
     - 実働時間
     - ステータス

4. **打刻修正申請**
   - 修正が必要な打刻に対して修正申請を作成
   - 申請内容:
     - 修正前の時刻
     - 修正後の時刻
     - 修正理由

5. **日付範囲フィルタリング**
   - 開始日・終了日を指定して履歴をフィルタリング

#### UI要素

- **打刻ボタンエリア**
  - 出勤ボタン
  - 退勤ボタン
  - 休憩開始ボタン
  - 休憩終了ボタン

- **現在のステータス表示**
  - 今日の出勤状況
  - 現在のステータス

- **履歴一覧**
  - テーブル形式（デスクトップ）
  - カード形式（モバイル）

#### 動作仕様

- **打刻成功時**: 履歴を更新
- **ステータス自動更新**: 打刻に応じてステータスを自動更新
- **実働時間表示**: APIから取得した`totalWorkMinutes`（総労働時間、分単位）を使用して表示
- **残業時間表示**: APIから取得した`overtimeMinutes`（残業時間、分単位）を使用して表示
- **深夜時間表示**: APIから取得した`lateNightMinutes`（深夜時間、分単位）を使用して表示
- **休憩時間表示**: 休憩時間はフロントエンド側で計算して表示（APIレスポンスの`breaks`配列から計算）
- **レスポンシブ対応**: モバイル表示に対応

---

### 12. 休暇申請画面

**パス**: `/employee/leave`  
**ファイル**: `src/pages/employee/LeaveRequest.tsx`  
**アクセス権限**: 従業員のみ

#### 機能概要

従業員が休暇申請を作成、編集、削除、履歴確認を行う画面です。

#### 主要機能

1. **休暇申請の作成**
   - 「申請」タブで申請フォームを開く
   - 入力項目:
     - 休暇種別（有給休暇、特別休暇など）
     - 期間（開始日・終了日）
     - 種別（全日/半日）
     - 日数（自動計算）
     - 理由

2. **休暇申請の編集**
   - 申請履歴一覧から編集ボタンで申請を編集
   - 承認前（申請中）の申請のみ編集可能
   - 編集フォームで申請内容を変更して更新

3. **休暇申請の取消**
   - 申請履歴一覧から取消ボタンで申請を取消
   - 承認前（申請中）の申請のみ取消可能
   - 取消確認モーダルで確認

4. **申請履歴一覧**
   - 「申請履歴」タブで過去の申請の一覧表示
   - 表示項目:
     - 休暇種別
     - 期間（開始日～終了日）
     - 日数
     - ステータス（申請中/承認/削除済み）
     - 理由
   - 年度によるフィルタリング（会計年度）

5. **検索・フィルタリング**
   - 会計年度によるフィルタリング
   - 年度選択ドロップダウン

#### UI要素

- **タブナビゲーション**
  - 「申請」タブ: 新規申請フォームを表示
  - 「申請履歴」タブ: 申請履歴一覧を表示

- **申請フォーム（新規・編集共通）**
  - 休暇種別選択
  - 開始日・終了日入力
  - 種別選択（全日/半日）
  - 日数表示（自動計算、読み取り専用）
  - 理由入力（テキストエリア）
  - ボタン:
    - 新規申請時: 「申請」ボタンのみ
    - 編集時: 「キャンセル」ボタン（左/下）と「更新」ボタン（右/上）

- **申請履歴一覧**
  - カード形式で表示
  - 各カードに編集ボタンと取消ボタン（申請中の場合のみ）
  - ステータスバッジで色分け表示

#### 動作仕様

- **日数自動計算**: 開始日・終了日から自動計算（全日/半日に応じて）
  - 全日: 開始日と終了日の差 + 1日
  - 半休: 0.5日（自動設定）
- **バリデーション**: 
  - 必須項目のチェック（開始日、理由）
  - 有給の場合、残日数チェック（編集時は既存申請を除外して計算）
- **ステータス表示**: 承認状態を色分けバッジで表示
- **編集制限**: 申請中（未承認）の申請のみ編集・取消可能
- **レスポンシブ対応**: モバイル表示に対応
- **ボタン配置**:
  - デスクトップ: キャンセル（左）、更新/申請（右）
  - モバイル: 更新/申請（上）、キャンセル（下）

---

## 共通仕様

### タイムゾーン管理

すべての時刻はJST（日本標準時）で統一します。

- **フロントエンド**: すべてJSTで送受信
  - APIリクエスト時: JST形式（`+09:00`付きまたはタイムゾーン情報なし）で送信
  - APIレスポンス時: JST形式として受信・処理
  - 表示時: JST時刻をそのまま表示
- **時刻の送信形式**: ISO 8601形式（例: `2024-01-15T09:00:00+09:00`）
- **業務日の計算**: JST基準で5時00分00秒を境界として計算
  - 5時00分00秒以降: 当日の業務日
  - 5時00分00秒未満: 前日の業務日

詳細は [TIMEZONE_MANAGEMENT_GUIDE.md](../kintai_node/docs/TIMEZONE_MANAGEMENT_GUIDE.md) を参照してください。

### レスポンシブデザイン

すべての画面で以下の仕様を適用:

- **デスクトップ**: 768px以上
  - テーブル形式の一覧表示
  - サイドバーまたは上部ナビゲーション
- **モバイル**: 768px以下
  - カード形式の一覧表示
  - ハンバーガーメニューまたは折りたたみナビゲーション

### エラーハンドリング

- **外部通信中**: プログレスバーを表示
- **エラーメッセージ**: 日本語で表示
- **成功メッセージ**: スナックバーで表示

### 認証・認可

- **認証**: すべての保護された画面で認証が必要
- **認可**: 管理者画面は管理者のみ、従業員画面は従業員のみアクセス可能
- **未認証時**: ログイン画面にリダイレクト
- **認可情報取得**: ログイン成功後、`GET /api/v1/auth/authorize` を呼び出して従業員情報を取得
  - レスポンス構造: `firstName`（苗字/姓）と`lastName`（名前/名）が別々のフィールドで返される
  - 表示形式: 「姓 名」の順序で結合して表示（例: `${firstName} ${lastName}` → "光永 和功"）

### ヘッダー

- **表示内容**:
  - システムタイトル（左側）
  - 従業員名（`firstName`（苗字/姓）+ `lastName`（名前/名）の順序で表示）
  - ロール（管理者/従業員）
  - ログアウトボタン（右側）

- **従業員名の取得**:
  - 認証成功後、`GET /api/v1/auth/authorize` から取得した従業員情報を使用
  - レスポンスの`firstName`と`lastName`を結合して表示
  - 表示形式: 「姓 名」の順序（例: "光永 和功"）

### ナビゲーション

- **管理者用ナビゲーション**:
  - 従業員一覧
  - 勤怠情報一覧
  - 申請一覧（未対応申請数をバッジで表示）
  - マスタ（手当マスタ、控除マスタ）

- **従業員用ナビゲーション**:
  - 勤怠
  - 休暇申請

### データ更新

- **即時反映**: 登録・更新・削除後、一覧を自動更新
- **オプティミスティック更新**: 可能な限り即座にUIを更新
- **エラー時**: ロールバックまたはエラーメッセージを表示

---

## 関連ドキュメント

- [API仕様書一覧](./API_SPEC_INDEX.md)
- [残業代計算仕様書](./OVERTIME_CALCULATION_SPEC.md)

